<!doctype html>
<html>
  <head>
    <title>Incremental Font Transfer Demo</title>
    <script src="./ift_client.js"></script>
    <script src="demo.js" type="text/javascript"></script>
    <style>
      h1.ur {
          font-family: "Roboto", "Noto Serif SC";
      }

      div.ur {
          font-family: "Roboto", "Noto Sans SC";
      }

      h1.ur.playfair {
          font-family: "Playfair", "Noto Serif SC";
      }
    </style>
    <link href="fonts.css" type="text/css" rel="stylesheet" />
    <link href="common.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <div class="controls">
      <input type="button" value="Previous" id="prev" disabled="true" />
      <input type="button" value="Next" id="next"/>
      <input type="button" value="Show Unicode Range" id="sample_toggle" style="visibility: hidden;" />
      <br/>
      <input type="checkbox" id="also_ur" name="also_ur" checked />
      <label for="also_ur">Also load fonts via unicode range.</label><br/>
    </div>
    <div class="text_and_metrics">
      <div id="pfe_sample" class="sample_text">
        <div class="type">Incremental Font transfer</div>
        <h1 id="title_pfe" class="pfe">Incremental Font Transfer Demo</h1>
        <div id="paragraph_pfe" class="pfe">
          This demonstrates the use of the incrementally loads fonts (IFT) to dynamically
          load font data for a variety of scripts. This is using a fully static version of IFT,
          as described <a href="https://lists.w3.org/Archives/Public/public-webfonts-wg/2023Sep/0003.html">here</a>.

          The non-cjk fonts (Roboto) are augmented by shared brotli patches, while the CJK fonts (Noto Sans/Serif SC)
          are augmented by a mixture of shared brotli patches (non outline data) and IFTB patches (outline data).

          <br/><br/>
          Instructions:
          <ul>
            <li>Next/Previous will switch between text samples. Switching to a new sample will use
            IFT to load any additional font data needed for it.</li>
            <li>If "Also load fonts via unicode range" is selected then fonts will be
              loaded via the Google Fonts API (using unicode range) in parallel to
              the incremental font transfer.</li>
            <li><b>Disable caching (via dev console) or force refresh the page (ctrl+shift+r) before
              starting. If caching is enabled the unicode range font loading may be served from
              the cache which will make the bytes transferred incorrect.</b></li>
            <li>If unicode range loading is enabled you can switch the displayed text
              sample between the two methods using the "Show unicode range" button.</li>
          </ul>
          Jump to:
          <ul>
            <li><a href="#" id="to-small-caps">Small Caps Example</a></li>
            <li><a href="#" id="to-vietnamese">Vietnamese</a></li>
            <li><a href="#" id="to-cyr-greek">Cyrilic + Greek</a></li>
            <li><a href="#" id="to-width">Design Space Augmentation</a></li>
            <li><a href="#" id="to-sim-chinese">Simplified Chinese</a></li>
            <li><a href="#" id="to-lo-freq-sim-chinese">Low Frequency Simplified Chinese Codepoints</a></li>
          </ul>

        </div>
      </div>
      <div id="ur_sample" class="sample_text hide">
        <div class="type">Unicode range</div>
        <h1 id="title_ur" class="ur"></h1>
        <div id="paragraph_ur" class="ur"></div>
      </div>
      <div class="metrics">
        <div class="metrics_inner">
          <span>Incremental font transferred:</span>
          <div id="pfe_bar" class="bar"></div>
          <div id="ur_byte_counter">
            <span>Unicode range transferred:</span>
            <div id="ur_bar" class="bar"></div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
